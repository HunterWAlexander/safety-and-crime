/* styles.css (FULL) */

/* -----------------------
   Theme Variables
----------------------- */
:root {
  --green: #00b96b;
  --green-dark: #009e58;
  --bg: #f5f9f7;
  --card: #ffffff;
  --text: #1e1e1e;
  --muted: #6b7280;
  --shadow: 0 10px 25px rgba(0, 0, 0, 0.10);
  --shadow-soft: 0 6px 18px rgba(0, 0, 0, 0.08);
  --radius: 18px;
  --border: rgba(15, 23, 42, 0.10);
}

* { box-sizing: border-box; }

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background: var(--bg);
  color: var(--text);
  margin: 0;
  padding: 0;
}

/* -----------------------
   Layout / Header
----------------------- */
.container {
  max-width: 1050px;
  margin: 0 auto;
  padding: 22px;
}

/* Header row layout */
.header{
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 14px;
  margin: 10px 0 12px;
}

h1 {
  text-align: left;
  margin: 6px 0 4px;
  color: var(--green);
  letter-spacing: 0.3px;
  font-size: 34px;
  line-height: 1.1;
}

.subtitle {
  text-align: left;
  color: #4a4a4a;
  margin: 0;
  line-height: 1.4;
}

/* Status pill */
.status-pill{
  align-self: center;
  padding: 8px 12px;
  border-radius: 999px;
  background: rgba(0,185,107,0.12);
  color: #007844;
  font-weight: 800;
  font-size: 13px;
  letter-spacing: 0.2px;
  box-shadow: var(--shadow-soft);
  border: 1px solid rgba(0,185,107,0.18);
  white-space: nowrap;
}
.status-pill.is-loading{
  background: rgba(241,196,15,0.16);
  border-color: rgba(241,196,15,0.22);
  color: #6a5200;
}
.status-pill.is-error{
  background: rgba(231,76,60,0.14);
  border-color: rgba(231,76,60,0.22);
  color: #8a1f16;
}

/* Disclaimer tooltip */
.info-tip{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width: 18px;
  height: 18px;
  margin-left: 6px;
  border-radius: 50%;
  background: rgba(0,185,107,0.12);
  color: #007844;
  font-weight: 900;
  font-size: 12px;
  cursor: help;
  position: relative;
}
.info-tip:focus{
  outline: 3px solid rgba(0,185,107,0.35);
  outline-offset: 3px;
}

.info-tip::after{
  content: attr(data-tip);
  position: absolute;
  bottom: calc(100% + 10px);
  left: 50%;
  transform: translateX(-50%);
  width: min(320px, 85vw);
  background: rgba(17,24,39,0.94);
  color: #fff;
  padding: 10px 12px;
  border-radius: 12px;
  font-size: 12px;
  line-height: 1.25;
  box-shadow: 0 14px 30px rgba(0,0,0,0.20);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s ease, transform 0.15s ease;
  z-index: 9999;
}
.info-tip:hover::after,
.info-tip:focus::after{
  opacity: 1;
  transform: translateX(-50%) translateY(-2px);
}

/* -----------------------
   Controls Row
----------------------- */
.search-bar {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin: 12px 0 10px;
}

.compare-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: rgba(255, 255, 255, 0.85);
  border-radius: 999px;
  box-shadow: var(--shadow-soft);
  font-size: 14px;
}

input[type="text"] {
  padding: 10px 14px;
  font-size: 16px;
  width: 170px;
  border-radius: 999px;
  border: 2px solid #d0d0d0;
  outline: none;
  transition: border 0.25s, box-shadow 0.25s;
  background: #fff;
}

input[type="text"]:focus {
  border-color: var(--green);
  box-shadow: 0 0 0 4px rgba(0, 185, 107, 0.12);
}

button {
  padding: 10px 14px;
  font-size: 16px;
  cursor: pointer;
  border-radius: 999px;
  border: none;
  background: var(--green);
  color: #fff;
  transition: background 0.2s, transform 0.15s, box-shadow 0.2s;
  box-shadow: var(--shadow-soft);
}

button:hover {
  background: var(--green-dark);
  transform: translateY(-1px) scale(1.02);
}

.clear-btn {
  background: #111827;
}
.clear-btn:hover {
  background: #0b1220;
}

/* Actions row + sort controls */
.actions-row{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  margin: 8px 0 6px;
  flex-wrap: wrap;
}

.results-controls{
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  background: rgba(255,255,255,0.85);
  border: 1px solid var(--border);
  border-radius: 999px;
  box-shadow: var(--shadow-soft);
}

.sort-select{
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.12);
  padding: 8px 10px;
  font-size: 13px;
  font-weight: 700;
  background: #fff;
  color: #0f172a;
  outline: none;
}
.sort-select:focus{
  box-shadow: 0 0 0 4px rgba(0, 185, 107, 0.12);
  border-color: rgba(0,185,107,0.45);
}

/* -----------------------
   History Pills
----------------------- */
.history {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.history-pill {
  background: #f1c40f;
  color: #111;
  box-shadow: var(--shadow-soft);
  padding: 8px 12px;
  border-radius: 999px;
  font-size: 14px;
  border: none;
}

.history-pill:hover {
  background: #d4ac0d;
  transform: translateY(-1px) scale(1.02);
}

/* -----------------------
   Results / Cards
----------------------- */
.result {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  justify-content: center;
  margin-top: 12px;
}

.result.compare-layout {
  justify-content: flex-start;
}

.result-card {
  width: 285px;
  background: var(--card);
  padding: 16px 16px 14px;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  position: relative;
  border: 1px solid rgba(15,23,42,0.06);

  opacity: 0;
  transform: translateY(14px);
  transition: opacity 0.35s ease, transform 0.35s ease, box-shadow 0.25s ease;
}

.result-card.show {
  opacity: 1;
  transform: translateY(0);
}

.result-card:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 14px 34px rgba(0, 0, 0, 0.14);
}

.result-card ul {
  list-style: none;
  padding: 0;
  margin: 10px 0 10px;
}

.result-card li {
  margin: 6px 0;
}

.muted {
  color: var(--muted);
  font-size: 14px;
}

/* safety bar */
.safety-bar-container {
  background: #eef2f7;
  height: 12px;
  border-radius: 999px;
  overflow: hidden;
  margin-top: 10px;
}
.safety-bar {
  height: 100%;
  width: 0;
  border-radius: 999px;
  transition: width 0.9s ease;
}

.highlight-card {
  border: 2px solid var(--green);
  box-shadow: 0 16px 40px rgba(0, 185, 107, 0.18);
}

/* Keyboard focus ring for cards */
.result-card:focus {
  outline: 3px solid rgba(0, 185, 107, 0.35);
  outline-offset: 3px;
}

/* Remove button */
.remove-card-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: #ef4444;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  font-weight: 800;
  box-shadow: 0 10px 20px rgba(239, 68, 68, 0.22);
}
.remove-card-btn:hover {
  background: #dc2626;
  transform: scale(1.06);
}

/* -----------------------
   Expandable Details
----------------------- */
.details-toggle{
  width: 100%;
  margin-top: 12px;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(17,24,39,0.06);
  color: #0f172a;
  border: 1px solid rgba(15,23,42,0.08);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  font-weight: 800;
  font-size: 14px;
  box-shadow: none;
  transform: none;
}

.details-toggle:hover{
  background: rgba(17,24,39,0.09);
  transform: none;
}

.details-toggle:focus{
  outline: 3px solid rgba(0, 185, 107, 0.25);
  outline-offset: 2px;
}

.chev{
  display: inline-block;
  transition: transform 0.2s ease;
  font-size: 16px;
  line-height: 1;
}

.result-card.details-open .chev{
  transform: rotate(180deg);
}

.details-panel{
  margin-top: 10px;
  border-radius: 14px;
  border: 1px solid rgba(15,23,42,0.08);
  background: rgba(255,255,255,0.85);
  padding: 10px 12px;

  overflow: hidden;
  max-height: 0px;
  transition: max-height 0.22s ease;
}

.details-grid{
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.details-row{
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.details-k{
  color: var(--muted);
  font-weight: 800;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.4px;
  flex: 0 0 auto;
}

.details-v{
  color: #0f172a;
  font-weight: 650;
  font-size: 13px;
  text-align: right;
}

/* -----------------------
   Skeleton Loading Cards
----------------------- */
.result-card.skeleton{
  opacity: 1;
  transform: none;
  pointer-events: none;
  border: 1px solid rgba(15,23,42,0.08);
}

.skeleton-line,
.skeleton-block{
  border-radius: 12px;
  background: rgba(15, 23, 42, 0.08);
  position: relative;
  overflow: hidden;
}

.skeleton-line{
  height: 12px;
  margin: 10px 0;
}

.skeleton-block{
  height: 58px;
  margin: 14px 0;
}

.w-35{ width: 35%; }
.w-55{ width: 55%; }
.w-60{ width: 60%; }
.w-80{ width: 80%; }

.skeleton-line::after,
.skeleton-block::after{
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255,255,255,0.55),
    transparent
  );
  animation: shimmer 1.25s infinite;
}

@keyframes shimmer{
  100% { transform: translateX(100%); }
}

/* -----------------------
   Map
----------------------- */
.map-container {
  position: relative;
  margin-top: 22px;
  height: 420px;
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow);
  border: 1px solid rgba(0, 0, 0, 0.06);
}

.map-container.map-hover {
  outline: 3px solid rgba(0, 185, 107, 0.25);
  outline-offset: 2px;
}

/* Top-right control bar */
.map-controls{
  position: absolute;
  z-index: 700;
  top: 12px;
  right: 12px;
  display: flex;
  gap: 8px;
  align-items: center;
}

/* Map buttons (inside bar) */
.map-btn{
  position: static;
  padding: 8px 12px;
  border-radius: 999px;
  border: none;
  cursor: pointer;
  background: rgba(17, 24, 39, 0.92);
  color: #fff;
  font-weight: 700;
  font-size: 13px;
  box-shadow: var(--shadow-soft);
  transition: transform 0.15s ease;
}
.map-btn:hover{ transform: translateY(-1px); }

/* Legend aligned with + button, offset from Leaflet zoom */
.map-legend {
  position: absolute;
  z-index: 600;
  left: 58px;
  top: 12px;
  background: rgba(255, 255, 255, 0.92);
  border-radius: 12px;
  padding: 8px 10px;
  box-shadow: var(--shadow);
  display: flex;
  gap: 10px;
  align-items: center;
  font-size: 12px;
  font-weight: 700;
}
.map-legend.collapsed { display: none; }

.leg-item { display: flex; align-items: center; gap: 6px; }
.dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }
.dot-green { background: #00b96b; }
.dot-yellow { background: #f1c40f; }
.dot-red { background: #e74c3c; }

/* Map pulse */
.map-pulse { animation: mapPulse 0.65s ease; }
@keyframes mapPulse {
  0% { box-shadow: 0 0 0 rgba(0, 185, 107, 0.0); }
  35% { box-shadow: 0 0 0 10px rgba(0, 185, 107, 0.18); }
  100% { box-shadow: 0 0 0 rgba(0, 185, 107, 0.0); }
}

/* Fullscreen mode */
.map-container.is-fullscreen {
  position: fixed !important;
  inset: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  margin: 0 !important;
  border-radius: 0 !important;
  z-index: 9998 !important;
}
.map-container.is-fullscreen .map-controls,
.map-container.is-fullscreen .map-legend {
  z-index: 9999;
}

/* -----------------------
   Toast
----------------------- */
#toast {
  position: fixed;
  left: 50%;
  bottom: 22px;
  transform: translateX(-50%) translateY(12px);
  background: rgba(17, 24, 39, 0.92);
  color: #fff;
  padding: 10px 14px;
  border-radius: 999px;
  font-size: 14px;
  box-shadow: var(--shadow);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease, transform 0.25s ease;
  z-index: 9999;
}
#toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* -----------------------
   âœ… Compatibility fixes for your JS-generated classes
----------------------- */
.card-topline {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
}

.card-topline h3 {
  margin: 0;
  color: #0f172a;
  font-size: 18px;
  line-height: 1.2;
}

/* Your JS uses: <a class="view-on-map"> */
.view-on-map {
  display: inline-block;
  margin-top: 2px;
  font-size: 14px;
  font-weight: 700;
  color: var(--green);
  text-decoration: none;
  white-space: nowrap;
}
.view-on-map:hover { text-decoration: underline; }

/* -----------------------
   Responsive / Mobile
----------------------- */
@media (max-width: 680px) {
  .container { padding: 16px; }

  .header{
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }

  h1{
    font-size: 30px;
  }

  .subtitle{
    text-align: left;
  }

  input[type="text"] {
    width: 100%;
    max-width: 340px;
  }

  .result-card {
    width: 100%;
    max-width: 520px;
  }

  .map-container { height: 320px; }

  .map-controls{
    top: 10px;
    right: 10px;
    gap: 6px;
  }

  .map-btn{
    padding: 6px 10px;
    font-size: 12px;
  }

  .map-legend {
    padding: 6px 8px;
    font-size: 11px;
    left: 52px;
    top: 10px;
    gap: 8px;
    max-width: calc(100% - 20px);
    flex-wrap: wrap;
  }

  .actions-row{
    justify-content: center;
  }

  .results-controls{
    width: 100%;
    justify-content: space-between;
  }
}
